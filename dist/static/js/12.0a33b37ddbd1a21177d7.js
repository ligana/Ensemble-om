webpackJsonp([12],{"1zjM":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("pFYg"),i=s.n(a),l=s("woOf"),d=s.n(l),o=s("ZMG9"),r=(s("KRY9"),s("jiRv")),n=s("TagB"),c={props:["title"],data:function(){return{dialog:!1,disabled:"false",headers:[{text:"用户名称",sortable:!1},{text:"系统ID",sortable:!1},{text:"模块ID",sortable:!1},{text:"权限等级",sortable:!1},{text:"Action",sortable:!1}],user:[],sys:[{key:"KBS",value:"核心系统"},{key:"GL",value:"核算系统"}],model:[{key:"MB",value:"业务参数"},{key:"FM",value:"系统参数"}],desserts:[],sourceData:[],keySet:[{key:"true",dataIndex:"userId"},{key:"true",dataIndex:"systemId"},{key:"true",dataIndex:"modelId"}],editedIndex:-1,title:"",editedItem:{userId:"",systemId:"",modelId:"",permLevel:""},defaultItem:{userId:"",systemId:"",modelId:"",permLevel:""},backValue:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"新增用户参数权限":"修改用户参数权限"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize(),this.initParentRef()},methods:{initialize:function(){var e=this;Object(o.o)("OM_PARAM_PERM_DEF").then(function(t){e.desserts=t.data.data.columnInfo,e.sourceData=e.copy(e.desserts,e.sourceData)})},addClick:function(){this.disabled="false"},initParentRef:function(){var e=this,t=sessionStorage.getItem("userId");sessionStorage.getItem("userLevel");Object(o.n)(t).then(function(t){e.userInfo=t.data.data.userInfo;for(var s=0;s<e.userInfo.length;s++){var a={};a.key=e.userInfo[s].userId,a.value=e.userInfo[s].userName,e.user.push(a)}})},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=d()({},e),this.dialog=!0,this.disabled="true"},deleteItem:function(e){var t=this.desserts.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(t,1)},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=d()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){this.editedIndex>-1?d()(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.backValue.data=Object(r.a)(this.keySet,this.desserts,this.sourceData),this.backValue.userName=sessionStorage.getItem("userId"),this.backValue.tableName="OM_PARAM_PERM_DEF",this.backValue.keySet="USER_ID,SYSTEM_ID,MODEL_ID",Object(o.s)(this.backValue).then(function(e){200===e.status&&n.a.success("提交成功！")}),this.close()},copy:function(e,t){var s=t||{};for(var a in e)"object"===i()(e[a])&&null!==e[a]?(s[a]=e[a].constructor===Array?[]:{},this.copy(e[a],s[a])):s[a]=e[a];return s},saveClick:function(){this.backValue.data=Object(r.a)(this.keySet,this.desserts,this.sourceData),this.backValue.userName=sessionStorage.getItem("userId"),this.backValue.tableName="OM_PARAM_PERM_DEF",this.backValue.keySet="USER_ID,SYSTEM_ID,MODEL_ID",Object(o.s)(this.backValue).then(function(e){200===e.status&&n.a.success("提交成功！")})}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"elevation-4"},[s("v-toolbar",{attrs:{color:"primary lighten-2",dark:""}},[s("v-toolbar-title",[e._v("参数系统权限管理")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",flat:"",color:"primary lighten-2"},on:{click:e.addClick},slot:"activator"},[s("td",{staticStyle:{color:"white","margin-left":"100px"}},[e._v("添加")])]),e._v(" "),s("v-card",[s("v-card-title",[s("span",{staticStyle:{color:"#00b0ff","font-size":"x-large","margin-left":"5%"}},[e._v(e._s(e.formTitle))])]),e._v(" "),s("v-card-text",{staticStyle:{"margin-top":"-10%"}},[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},["true"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"用户名称",items:e.user,"item-text":"value","item-value":"key",disabled:""},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1):e._e(),e._v(" "),"true"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"系统ID",items:e.sys,"item-text":"value","item-value":"key",disabled:""},model:{value:e.editedItem.systemId,callback:function(t){e.$set(e.editedItem,"systemId",t)},expression:"editedItem.systemId"}})],1):e._e(),e._v(" "),"true"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"模块ID",items:e.model,"item-text":"value","item-value":"key",disabled:""},model:{value:e.editedItem.modelId,callback:function(t){e.$set(e.editedItem,"modelId",t)},expression:"editedItem.modelId"}})],1):e._e(),e._v(" "),"false"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"用户名称",items:e.user,"item-text":"value","item-value":"key"},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1):e._e(),e._v(" "),"false"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"系统ID",items:e.sys,"item-text":"value","item-value":"key"},model:{value:e.editedItem.systemId,callback:function(t){e.$set(e.editedItem,"systemId",t)},expression:"editedItem.systemId"}})],1):e._e(),e._v(" "),"false"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"模块ID",items:e.model,"item-text":"value","item-value":"key"},model:{value:e.editedItem.modelId,callback:function(t){e.$set(e.editedItem,"modelId",t)},expression:"editedItem.modelId"}})],1):e._e(),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-text-field",{attrs:{label:"权限等级"},model:{value:e.editedItem.permLevel,callback:function(t){e.$set(e.editedItem,"permLevel",t)},expression:"editedItem.permLevel"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",{staticStyle:{"margin-top":"-7%"}},[s("v-btn",{staticClass:"bthStyle",staticStyle:{"margin-left":"6%"},attrs:{color:"info"},on:{click:e.close}},[e._v("取消")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{staticClass:"bthStyle",staticStyle:{"margin-right":"6%"},attrs:{color:"info"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1),e._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.userId))]),e._v(" "),s("td",[e._v(e._s(t.item.systemId))]),e._v(" "),s("td",[e._v(e._s(t.item.modelId))]),e._v(" "),s("td",[e._v(e._s(t.item.permLevel))]),e._v(" "),s("td",[s("v-tooltip",{staticStyle:{"margin-left":"-20px"},attrs:{bottom:"",color:"blue"}},[s("v-btn",{attrs:{slot:"activator",flat:"",icon:"edit"},slot:"activator"},[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"#0d47a1"},attrs:{small:""},on:{click:function(s){e.editItem(t.item)}}},[e._v("edit")])],1),e._v(" "),s("span",[e._v("修改")])],1),e._v(" "),s("v-tooltip",{staticStyle:{"margin-left":"-20px"},attrs:{bottom:"",color:"red"}},[s("v-btn",{attrs:{slot:"activator",flat:"",icon:"delete"},slot:"activator"},[s("v-icon",{staticStyle:{color:"red"},attrs:{small:""},on:{click:function(s){e.deleteItem(t.item)}}},[e._v("delete")])],1),e._v(" "),s("span",[e._v("删除")])],1)],1)]}}])})],1)},staticRenderFns:[]};var u={props:["title"],data:function(){return{dialog:!1,disabled:"false",headers:[{text:"用户名称",sortable:!1},{text:"模块信息",sortable:!1},{text:"基础产品权限",sortable:!1},{text:"可售产品权限",sortable:!1},{text:"Action",sortable:!1}],permLevel:[{key:"1",value:"可编辑可修改查看"},{key:"2",value:"可修改查看"},{key:"3",value:"查看"}],user:[],userInfo:[],prodClass:[],model:[],desserts:[],sourceData:[],keySet:[{key:"true",dataIndex:"userId"},{key:"true",dataIndex:"modelType"}],editedIndex:-1,title:"",editedItem:{userId:"",modelType:"",baseProdLevel:"",soldProdLevel:""},defaultItem:{userId:"",modelType:"",baseProdLevel:"",soldProdLevel:""},backValue:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"新增用户产品工厂权限":"修改用户产品工厂权限"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize(),this.initRef()},methods:{initialize:function(){var e=this;Object(o.o)("OM_PROD_PERM_DEF").then(function(t){e.desserts=t.data.data.columnInfo,e.sourceData=e.copy(e.desserts,e.sourceData)})},addClick:function(){this.disabled="false"},initRef:function(){var e=this,t=sessionStorage.getItem("userId");sessionStorage.getItem("userLevel");Object(o.n)(t).then(function(t){e.userInfo=t.data.data.userInfo;for(var s=0;s<e.userInfo.length;s++){var a={};a.key=e.userInfo[s].userId,a.value=e.userInfo[s].userName,e.user.push(a)}}),Object(o.h)("MB_PROD_CLASS").then(function(t){e.prodClass=t.data.data.columnInfo;for(var s=0;s<e.prodClass.length;s++)if("1"===e.prodClass[s].PROD_CLASS_LEVEL){var a={};a.key=e.prodClass[s].PROD_CLASS,a.value=e.prodClass[s].PROD_CLASS_DESC,e.model.push(a)}})},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=d()({},e),this.dialog=!0,this.disabled="true"},deleteItem:function(e){var t=this.desserts.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(t,1)},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=d()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){this.editedIndex>-1?d()(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.backValue.data=Object(r.a)(this.keySet,this.desserts,this.sourceData),this.backValue.userName=sessionStorage.getItem("userId"),this.backValue.tableName="OM_PROD_PERM_DEF",this.backValue.keySet="USER_ID,MODEL_TYPE",Object(o.s)(this.backValue).then(function(e){200===e.status&&n.a.success("提交成功！")}),this.close()},copy:function(e,t){var s=t||{};for(var a in e)"object"===i()(e[a])&&null!==e[a]?(s[a]=e[a].constructor===Array?[]:{},this.copy(e[a],s[a])):s[a]=e[a];return s},saveClick:function(){this.backValue.data=Object(r.a)(this.keySet,this.desserts,this.sourceData),this.backValue.userName=sessionStorage.getItem("userId"),this.backValue.tableName="OM_PROD_PERM_DEF",this.backValue.keySet="USER_ID,MODEL_TYPE",Object(o.s)(this.backValue).then(function(e){200===e.status&&n.a.success("提交成功！")})}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"elevation-4"},[s("v-toolbar",{attrs:{color:"primary lighten-2",dark:""}},[s("v-toolbar-title",[e._v("产品工厂权限管理")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-btn",{attrs:{slot:"activator",flat:"",color:"primary lighten-2"},on:{click:e.addClick},slot:"activator"},[s("td",{staticStyle:{color:"white","margin-left":"100px"}},[e._v("添加")])]),e._v(" "),s("v-card",[s("v-card-title",[s("span",{staticStyle:{color:"#00b0ff","font-size":"x-large","margin-left":"5%"}},[e._v(e._s(e.formTitle))])]),e._v(" "),s("v-card-text",{staticStyle:{"margin-top":"-10%"}},[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},["true"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"用户名称",items:e.user,"item-text":"value","item-value":"key",disabled:""},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1):e._e(),e._v(" "),"true"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"模块信息",items:e.model,"item-text":"value","item-value":"key",disabled:""},model:{value:e.editedItem.modelType,callback:function(t){e.$set(e.editedItem,"modelType",t)},expression:"editedItem.modelType"}})],1):e._e(),e._v(" "),"false"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"用户名称",items:e.user,"item-text":"value","item-value":"key"},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1):e._e(),e._v(" "),"false"==e.disabled?s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"模块信息",items:e.model,"item-text":"value","item-value":"key"},model:{value:e.editedItem.modelType,callback:function(t){e.$set(e.editedItem,"modelType",t)},expression:"editedItem.modelType"}})],1):e._e(),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"基础产品权限设置",items:e.permLevel,"item-text":"value","item-value":"key"},model:{value:e.editedItem.baseProdLevel,callback:function(t){e.$set(e.editedItem,"baseProdLevel",t)},expression:"editedItem.baseProdLevel"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-select",{attrs:{label:"可售产品权限设置",items:e.permLevel,"item-text":"value","item-value":"key"},model:{value:e.editedItem.soldProdLevel,callback:function(t){e.$set(e.editedItem,"soldProdLevel",t)},expression:"editedItem.soldProdLevel"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",{staticStyle:{"margin-top":"-7%"}},[s("v-btn",{staticClass:"bthStyle",staticStyle:{"margin-left":"6%"},attrs:{color:"info"},on:{click:e.close}},[e._v("取消")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{staticClass:"bthStyle",staticStyle:{"margin-right":"6%"},attrs:{color:"info"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1),e._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"items",fn:function(t){return[s("td",[e._v(e._s(t.item.userId))]),e._v(" "),s("td",[e._v(e._s(t.item.modelType))]),e._v(" "),s("td",[e._v(e._s(t.item.baseProdLevel))]),e._v(" "),s("td",[e._v(e._s(t.item.soldProdLevel))]),e._v(" "),s("td",[s("v-tooltip",{staticStyle:{"margin-left":"-20px"},attrs:{bottom:"",color:"blue"}},[s("v-btn",{attrs:{slot:"activator",flat:"",icon:"edit"},slot:"activator"},[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"#0d47a1"},attrs:{small:""},on:{click:function(s){e.editItem(t.item)}}},[e._v("edit")])],1),e._v(" "),s("span",[e._v("修改")])],1),e._v(" "),s("v-tooltip",{staticStyle:{"margin-left":"-20px"},attrs:{bottom:"",color:"red"}},[s("v-btn",{attrs:{slot:"activator",flat:"",icon:"delete"},slot:"activator"},[s("v-icon",{staticStyle:{color:"red"},attrs:{small:""},on:{click:function(s){e.deleteItem(t.item)}}},[e._v("delete")])],1),e._v(" "),s("span",[e._v("删除")])],1)],1)]}}])})],1)},staticRenderFns:[]};var f={components:{ParamPerm:s("VU/8")(c,m,!1,function(e){s("N1Fb")},"data-v-7b60d456",null).exports,ProdPerm:s("VU/8")(u,v,!1,function(e){s("lWi0")},"data-v-6f63f7d1",null).exports},data:function(){return{action:"prod",items:[{title:"产品工厂权限管理",name:"prod",class:"",icon:"gavel",color:"blue"},{title:"参数系统权限管理",name:"param",class:"",icon:"settings",color:"blue"},{title:"网贷端权限管理",name:"inter",class:"",icon:"widgets",color:"blue"}],window:0,windowItem:"windowItem",windowTitle:"windowTitle"}},methods:{actionTag:function(e){for(var t in this.action=e.name,e.class="selected",this.items)this.items[t].name!=e.name&&(this.items[t].class="")},clickItem:function(e){var t=this.userManagement;for(var s in t)0!=s&&(t[s].index==e?t[s].classSpan="spanItemSelected":t[s].classSpan="spanItem")}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pt-5 pl-4"},[s("v-layout",[s("v-flex",{staticClass:"pl-4",attrs:{md3:"",lg3:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",{staticClass:"pt-4 elevation-4 radiusDc"},[s("v-card-media",{staticStyle:{"margin-top":"-10%"},attrs:{src:"/static/avatar/perm2.jpg"}})],1)],1),e._v(" "),s("v-flex",{staticClass:"mt-2 pb-4",attrs:{xs12:""}},[s("v-card",{staticClass:"elevation-4 radiusDc",staticStyle:{height:"200%"}},[s("v-list",e._l(e.items,function(t){return s("v-list-tile",{key:t.title,class:t.class,on:{click:function(s){e.actionTag(t)}}},[s("v-list-tile-action",[s("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{staticStyle:{"font-size":"medium"}},[e._v(e._s(t.title))])],1)],1)}))],1)],1)],1),e._v(" "),s("v-flex",{staticClass:"pl-4 pb-4 pr-1",attrs:{md10:"",lg10:""}},["prod"==e.action?s("prod-perm"):e._e(),e._v(" "),"param"==e.action?s("param-perm"):e._e()],1)],1)],1)},staticRenderFns:[]};var b=s("VU/8")(f,I,!1,function(e){s("pomi")},"data-v-7d966ad8",null);t.default=b.exports},N1Fb:function(e,t){},lWi0:function(e,t){},pomi:function(e,t){}});
//# sourceMappingURL=12.0a33b37ddbd1a21177d7.js.map