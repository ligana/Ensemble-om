webpackJsonp([64],{"7MHo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),l=a.n(s),c=a("pFYg"),o=a.n(c),n=a("2Kxe"),i=a.n(n),r=(a("KRY9"),a("drSk")),d=a("KaST"),u=a("zxaA"),v=a("7WB4"),f=a("ZgAb"),m={components:{DcMultiselect:r.a,DcSwitch:d.a,DcTreeSelect:u.a,DcDate:f.a,DcTextField:v.a},props:{selected:Object,columns:Object},data:function(){return{editSelected:{}}},watch:{selected:{handler:function(t){this.selectedAction()}}},mounted:function(){this.selectedAction()},methods:{selectedAction:function(){var t=this._props.selected,e=this._props.columns,a={};if(void 0!=e){for(var s in e){var l=e[s].dataIndex,c=t[l];void 0==c&&(c="");var o=i.a[l];void 0!=o&&"undefined"!=o&&(o.value=c,a[l]=o)}this.editSelected=a}},submit:function(){this.$emit("editAction","submit",this.editSelected)},close:function(){this.$emit("editAction","close")}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",[t._l(t.editSelected,function(e,s,l){return a("v-form",{key:s,model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},["input"==e.columnType?a("dc-text-field",{staticClass:"mx-5",attrs:{counter:10,label:e.columnDesc,labelDesc:e.columnDesc,required:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"keyData.value"}}):t._e(),t._v(" "),"select"==e.columnType?a("dc-multiselect",{staticClass:"dcMulti",attrs:{labelDesc:e.columnDesc,options:e.valueScore,isMultiSelect:e.isMultiSelect},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"keyData.value"}}):t._e(),t._v(" "),"switch"==e.columnType?a("dc-switch",{attrs:{labelDesc:e.columnDesc},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"keyData.value"}}):t._e()],1)}),t._v(" "),a("v-spacer"),t._v(" "),a("v-flex",{attrs:{"mx-5":""}},[a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.submit}},[t._v("\n                确认\n            ")]),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.close}},[t._v("\n                取消\n            ")])],1)],2)],1)},staticRenderFns:[]},p=a("VU/8")(m,h,!1,null,null,null).exports,b=a("ZMG9"),y=a("TagB"),_=a("oFuF"),k=a("jiRv"),D={components:{DcMultiselect:r.a,EditTableInfo:p,DcTextField:v.a},data:function(){return{title:"",tableName:"",dataInfo:[],sourceDataInfo:[],disabledFlag:!1,prodType:"",open:!0,prodTypeSearch:"",prodClassSearch:"RB100",prodClassOption:[{key:"RB100",value:"RB100-存款RB100"},{key:"RB400",value:"RB400-存款RB400"}],valid:!0,dialog:!1,tbd:{},option:"",selectedRowKeys:[],selected:{},columns:[],backValue:{}}},mounted:function(){void 0!=this.$route.params.tableName&&(this.title=this.$route.params.tableName+"-"+this.$route.params.tableDesc,this.tableName=this.$route.params.tableName,this.getParaTable(this.$route.params.tableName))},methods:{getParaTable:function(t){var e=this;Object(b.h)(t).then(function(t){e.dataInfo=t.data.data.columnInfo,e.sourceDataInfo=e.copy(e.dataInfo,e.sourceDataInfo),e.columns=t.data.data.column})},copy:function(t,e){var a=e||{};for(var s in t)"object"===o()(t[s])&&null!==t[s]?(a[s]=t[s].constructor===Array?[]:{},this.copy(t[s],a[s])):a[s]=t[s];return a},customRow:function(t){return{on:{click:this.clickRow.bind(this,t)}}},clickRow:function(t,e){var a=e.currentTarget,s=a.parentNode;for(var l in s.childNodes)isNaN(l)||(a==s.childNodes[l]?(s.childNodes[l].style="background-color: #e6f7ff",this.tbd=s.childNodes[l]):s.childNodes[l].style="");this.selected=t},onEdit:function(){this.tbd.style="",this.dialog=!0},onAdd:function(){this.tbd.style="",this.selected={},this.dialog=!0},onDelete:function(){this.tbd.style="",Object(_.remove)(this.dataInfo,this.selected)},changeTable:function(){this.tbd.style=""},onSave:function(){this.dataInfo;this.backValue.data=Object(k.a)(this.columns,this.dataInfo,this.sourceDataInfo),this.backValue.tableName=this.tableName,this.backValue.option="save",this.backValue.userName=sessionStorage.getItem("userId"),Object(b.t)(this.backValue).then(function(t){200===t.status&&y.a.success("提交成功！")})},editAction:function(t,e){if(this.dialog=!1,"submit"==t){var a=this.selected;if("{}"==l()(a)){for(var s in e)a[s]=e[s].value;this.dataInfo.splice(0,0,a)}else for(var c in a)a[c]=e[c].value}}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"ml-4 mr-4",attrs:{"justify-center":"","pt-4":""}},[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-card",{staticClass:"radiusDc"},[a("v-toolbar",{attrs:{color:"primary lighten-2",dark:"","scroll-off-screen":"","scroll-target":"#scrolling-techniques",flat:""}},[a("v-icon",[t._v("widgets")]),t._v(" "),a("v-toolbar-title",[t._v(t._s(t.title))]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-toolbar",{attrs:{card:"",dense:"",color:"transparent"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs6:"",sm6:""}},[a("dc-text-field",{attrs:{label:"产品类型",labelDesc:"产品类型"},model:{value:t.prodTypeSearch,callback:function(e){t.prodTypeSearch=e},expression:"prodTypeSearch"}})],1),t._v(" "),a("v-flex",{attrs:{xs6:"",sm6:""}},[a("dc-multiselect",{attrs:{label:"产品分类",labelDesc:"产品分类",options:t.prodClassOption},model:{value:t.prodClassSearch,callback:function(e){t.prodClassSearch=e},expression:"prodClassSearch"}})],1)],1)],1),t._v(" "),a("v-toolbar",{attrs:{card:"",dense:"",color:"transparent"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.onAdd}},[t._v("新增")]),t._v(" "),a("a-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:t.onEdit}},[t._v("修改")]),t._v(" "),a("a-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:t.onDelete}},[t._v("删除")]),t._v(" "),a("a-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:t.onSave}},[t._v("提交")])],1),t._v(" "),a("v-card-text",{staticClass:"pa-0"},[a("a-table",{attrs:{customRow:t.customRow,columns:t.columns,dataSource:t.dataInfo},on:{change:t.changeTable}}),t._v(" "),a("v-divider")],1),t._v(" "),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("edit-table-info",{attrs:{selected:t.selected,columns:t.columns},on:{editAction:t.editAction}})],1)],1)],1)],1)},staticRenderFns:[]},x=a("VU/8")(D,g,!1,null,null,null);e.default=x.exports}});
//# sourceMappingURL=64.e9c2d256334a2f1bd381.js.map